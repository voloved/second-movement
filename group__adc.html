<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.12.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Movement: Analog Input</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Movement<span id="projectnumber">&#160;2.0.0</span>
   </div>
   <div id="projectbrief">The community firmware for Sensor Watch.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.12.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',false);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="doc-content">
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){ initResizable(false); });
/* @license-end */
</script>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">Analog Input</div></div>
</div><!--header-->
<div class="contents">

<p>This section covers functions related to the SAM L22's analog-to-digital converter, as well as configuring and reading values from the five analog-capable pins on the 9-pin connector.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga908b5334af677309b03d7679d77aaa02" id="r_ga908b5334af677309b03d7679d77aaa02"><td class="memItemLeft" align="right" valign="top"><a id="ga908b5334af677309b03d7679d77aaa02" name="ga908b5334af677309b03d7679d77aaa02"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>watch_enable_adc</b> (void)</td></tr>
<tr class="memdesc:ga908b5334af677309b03d7679d77aaa02"><td class="mdescLeft">&#160;</td><td class="mdescRight">Enables the ADC peripheral. You must call this before attempting to read a value from an analog pin. <br /></td></tr>
<tr class="separator:ga908b5334af677309b03d7679d77aaa02"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga072655e8dcbcdd7d323b3244be6acc0a" id="r_ga072655e8dcbcdd7d323b3244be6acc0a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga072655e8dcbcdd7d323b3244be6acc0a">watch_enable_analog_input</a> (const uint16_t pin)</td></tr>
<tr class="memdesc:ga072655e8dcbcdd7d323b3244be6acc0a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Configures the selected pin for analog input.  <br /></td></tr>
<tr class="separator:ga072655e8dcbcdd7d323b3244be6acc0a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga748bd70f4e7a088496c4906845dff62a" id="r_ga748bd70f4e7a088496c4906845dff62a"><td class="memItemLeft" align="right" valign="top">uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga748bd70f4e7a088496c4906845dff62a">watch_get_analog_pin_level</a> (const uint16_t pin)</td></tr>
<tr class="memdesc:ga748bd70f4e7a088496c4906845dff62a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reads an analog value from one of the pins.  <br /></td></tr>
<tr class="separator:ga748bd70f4e7a088496c4906845dff62a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga465fcb058492d350d29fe4403df85b14" id="r_ga465fcb058492d350d29fe4403df85b14"><td class="memItemLeft" align="right" valign="top">uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga465fcb058492d350d29fe4403df85b14">watch_get_vcc_voltage</a> (void)</td></tr>
<tr class="memdesc:ga465fcb058492d350d29fe4403df85b14"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the voltage of the VCC supply in millivolts (i.e. 3000 mV == 3.0 V). If running on a coin cell, this will be the battery voltage. If the ADC is not running when this function is called, it enabled the ADC briefly, and returns it to the off state.  <br /></td></tr>
<tr class="separator:ga465fcb058492d350d29fe4403df85b14"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga398f8e365effab9824a69daa0a6abef4" id="r_ga398f8e365effab9824a69daa0a6abef4"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga398f8e365effab9824a69daa0a6abef4">watch_disable_analog_input</a> (const uint16_t pin)</td></tr>
<tr class="memdesc:ga398f8e365effab9824a69daa0a6abef4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Disables the analog circuitry on the selected pin.  <br /></td></tr>
<tr class="separator:ga398f8e365effab9824a69daa0a6abef4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaf443c79008bec5ceecbd21ad401d52cb" id="r_gaf443c79008bec5ceecbd21ad401d52cb"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gaf443c79008bec5ceecbd21ad401d52cb">watch_disable_adc</a> (void)</td></tr>
<tr class="memdesc:gaf443c79008bec5ceecbd21ad401d52cb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Disables the ADC peripheral.  <br /></td></tr>
<tr class="separator:gaf443c79008bec5ceecbd21ad401d52cb"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>This section covers functions related to the SAM L22's analog-to-digital converter, as well as configuring and reading values from the five analog-capable pins on the 9-pin connector. </p>
<h2 class="groupheader">Function Documentation</h2>
<a id="gaf443c79008bec5ceecbd21ad401d52cb" name="gaf443c79008bec5ceecbd21ad401d52cb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaf443c79008bec5ceecbd21ad401d52cb">&#9670;&#160;</a></span>watch_disable_adc()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void watch_disable_adc </td>
          <td>(</td>
          <td class="paramtype">void</td>          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Disables the ADC peripheral. </p>
<dl class="section note"><dt>Note</dt><dd>You will need to call watch_enable_adc to re-enable the ADC peripheral. When you do, it will have the default settings of 16 samples and 1 measurement cycle; if you customized these parameters, you will need to set them up again. </dd></dl>

</div>
</div>
<a id="ga398f8e365effab9824a69daa0a6abef4" name="ga398f8e365effab9824a69daa0a6abef4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga398f8e365effab9824a69daa0a6abef4">&#9670;&#160;</a></span>watch_disable_analog_input()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void watch_disable_analog_input </td>
          <td>(</td>
          <td class="paramtype">const uint16_t</td>          <td class="paramname"><span class="paramname"><em>pin</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Disables the analog circuitry on the selected pin. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pin</td><td>One of pins A0-A4. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ga072655e8dcbcdd7d323b3244be6acc0a" name="ga072655e8dcbcdd7d323b3244be6acc0a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga072655e8dcbcdd7d323b3244be6acc0a">&#9670;&#160;</a></span>watch_enable_analog_input()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void watch_enable_analog_input </td>
          <td>(</td>
          <td class="paramtype">const uint16_t</td>          <td class="paramname"><span class="paramname"><em>pin</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Configures the selected pin for analog input. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pin</td><td>One of the analog pins, access using the HAL_GPIO_Ax_pin() macro. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ga748bd70f4e7a088496c4906845dff62a" name="ga748bd70f4e7a088496c4906845dff62a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga748bd70f4e7a088496c4906845dff62a">&#9670;&#160;</a></span>watch_get_analog_pin_level()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint16_t watch_get_analog_pin_level </td>
          <td>(</td>
          <td class="paramtype">const uint16_t</td>          <td class="paramname"><span class="paramname"><em>pin</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Reads an analog value from one of the pins. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pin</td><td>One of the analog pins, access using the HAL_GPIO_Ax_pin() macro. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>a 16-bit unsigned integer from 0-65535 representing the sampled value, unless you have changed the number of samples. </dd></dl>
<dl class="section see"><dt>See also</dt><dd>watch_set_num_analog_samples for details on how that function changes the values returned from this one. </dd></dl>

</div>
</div>
<a id="ga465fcb058492d350d29fe4403df85b14" name="ga465fcb058492d350d29fe4403df85b14"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga465fcb058492d350d29fe4403df85b14">&#9670;&#160;</a></span>watch_get_vcc_voltage()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint16_t watch_get_vcc_voltage </td>
          <td>(</td>
          <td class="paramtype">void</td>          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns the voltage of the VCC supply in millivolts (i.e. 3000 mV == 3.0 V). If running on a coin cell, this will be the battery voltage. If the ADC is not running when this function is called, it enabled the ADC briefly, and returns it to the off state. </p>
<p>Unlike other ADC functions, this function does not return a raw value from the ADC, but rather scales it to an actual number of millivolts. This is because the ADC doesn't let us measure VCC per se; it instead lets us measure VCC / 4, and we choose to measure it against the internal reference voltage of 1.024 V. In short, the ADC gives us a number that's complicated to deal with, so we just turn it into a useful number for you :) </p><dl class="section note"><dt>Note</dt><dd>This function depends on INTREF being 1.024V. If you have changed it by poking at the supply controller's VREF.SEL bits, this function will return inaccurate values. </dd></dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.12.0
</small></address>
</div><!-- doc-content -->
</body>
</html>
